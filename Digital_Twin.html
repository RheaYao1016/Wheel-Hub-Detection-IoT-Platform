<!DOCTYPE html>
<html lang=\"zh-CN\">
<head>
    <meta charset=\"UTF-8\">
    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">
    <title>轮毂检测数字孪生平台 ・ 数字孪生</title>
    <link rel=\"stylesheet\" href=\"css/common.css\">
    <link rel=\"stylesheet\" href=\"css/digitaltwin.css\">
</head>
<body class=\"page\">
    <header class=\"topbar\">
        <div class=\"brand\">
            <span class=\"brand-circle\">W</span>
            <span>轮毂检测数字孪生平台</span>
        </div>
        <nav id=\"topNav\" class=\"nav\"></nav>
        <div id=\"accountMenu\"></div>
    </header>

    <main class=\"page-content\">
        <section class=\"digital-top\">
            <div class=\"card digital-col\">
                <img src=\"public/images/TianXiaWuShuang.png\" alt=\"设备左侧结构示意\" class=\"digital-figure\">
            </div>
            <div class=\"card digital-col viewer-col\">
                <div class=\"card-header\">三维模型展示</div>
                <div id=\"twinViewer\" class=\"viewer-stage\"></div>
            </div>
            <div class=\"card digital-col\">
                <img src=\"public/images/she_bei_jian_mo.png\" alt=\"设备右侧结构示意\" class=\"digital-figure\">
            </div>
        </section>

        <section class=\"digital-bottom\">
            <div class=\"card digital-card\">
                <div class=\"card-header\">实时参数</div>
                <p class=\"card-body\">传感器读数、尺寸偏差与驱动状态实时映射，支持自定义阈值与数据订阅，便于维护人员快速诊断。</p>
            </div>
            <div class=\"card digital-card\">
                <div class=\"card-header\">状态监控</div>
                <p class=\"card-body\">监控设备运行状态、节拍、合格率与告警信息，结合可视化看板查看趋势并触发应急联动。</p>
            </div>
            <div class=\"card digital-card\">
                <div class=\"card-header\">警告记录</div>
                <p class=\"card-body\">近24小时告警记录与处理闭环清晰可查，支持按机构、班次、告警等级等维度回溯与导出。</p>
            </div>
        </section>

        <!-- FLOW_SECTION_START -->
        <section class=\"card flow-wrap\" id=\"flowSection\">
            <div class=\"flow-text\">
                <h3>工作流程</h3>
                <p>流程示意突出物理环节与数字映射，便于巡检和调度人员快速理解。</p>
                <ol id=\"flowText\">
                    <li>入站与对中：工件定位至检测位，夹具锁定。</li>
                    <li>多面采集：同步测量关键尺寸与孔位。</li>
                    <li>翻转检测：暴露不同检测面，补充特征。</li>
                    <li>视觉判定：算法输出尺寸/公差/良率。</li>
                    <li>数据联动：结果同步至仓储/ERP/看板。</li>
                </ol>
            </div>
            <div class=\"flow-rail\">
                <div class=\"flow-pills\" id=\"flowPills\" aria-live=\"polite\">
                    <div class=\"flow-pill\" data-step=\"0\"><span>入站对中</span><small>夹具锁定</small></div>
                    <div class=\"flow-connector\" style=\"width:40px\"></div>
                    <div class=\"flow-pill\" data-step=\"1\"><span>多面采集</span><small>同步测量</small></div>
                    <div class=\"flow-connector\" style=\"width:40px\"></div>
                    <div class=\"flow-pill\" data-step=\"2\"><span>翻转检测</span><small>轮廓/孔位</small></div>
                    <div class=\"flow-connector\" style=\"width:40px\"></div>
                    <div class=\"flow-pill\" data-step=\"3\"><span>视觉判定</span><small>算法输出</small></div>
                    <div class=\"flow-connector\" style=\"width:40px\"></div>
                    <div class=\"flow-pill\" data-step=\"4\"><span>数据联动</span><small>ERP/仓储</small></div>
                </div>
            </div>
        </section>
        <!-- FLOW_SECTION_END -->

        <script>
        (function(){
          const pills=[...document.querySelectorAll('#flowPills .flow-pill')];
          const textLis=[...document.querySelectorAll('#flowText li')];
          if(!pills.length||!textLis.length){return;}
          let cur=0,timer=null;
          function render(i){
            pills.forEach(p=>p.classList.toggle('active',+p.dataset.step===i));
            textLis.forEach((li,idx)=>li.classList.toggle('active',idx===i));
          }
          window.setFlowStep=function(i){
            cur=(i+pills.length)%pills.length;
            render(cur);
          };
          function autoplay(){
            if(timer){clearTimeout(timer);}
            timer=setTimeout(()=>{
              setFlowStep(cur+1);
              autoplay();
            },1800);
          }
          setFlowStep(0);
          autoplay();
        })();
        </script>

    </main>

    <footer class=\"site-footer\">
        ? 2025 轮毂检测数字孪生平台 ・ All Rights Reserved.<span>项目合作/建议请联系：ruyiyao@stumail.ysu.edu.cn</span>
    </footer>

    <script src=\"js/app-shell.js\"></script>
    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r150/three.min.js\"></script>
    <script src=\"https://cdn.jsdelivr.net/npm/three@0.150.0/examples/js/controls/OrbitControls.js\"></script>
    <script src=\"https://cdn.jsdelivr.net/npm/three@0.150.0/examples/js/loaders/GLTFLoader.js\"></script>
    <script src=\"js/digitaltwin.js\"></script>
</body>
</html>
